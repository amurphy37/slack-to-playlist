(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{136:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(15),o=a.n(r),l=(a(64),a(65),a(23)),s=a(3),i=a(5),u=a(6),m=a(8),p=a(7),d=a(137),h=a(17),g=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return c.a.createElement("div",{className:"container",id:"landing-container"},c.a.createElement("h1",null,"SlackToPlaylist"),c.a.createElement("h2",null,"Automatically add songs to playlist from Slack channel"),c.a.createElement(h.b,{to:"/register"},c.a.createElement(d.a,{className:"registerBtn"},"Register")),c.a.createElement(h.b,{to:"/login"},"Already a member? Click to log in."))}}]),a}(n.Component),f=a(19),b=a.n(f),v=a(22),E=a(13),k=a(12),w=a.n(k),y=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this)).handleAppleAuth=Object(v.a)(b.a.mark((function e(){var t,a,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=window.MusicKit.getInstance(),e.next=4,t.authorize();case 4:if(a=e.sent,!(n={appleCode:a}).appleCode){e.next=11;break}return e.next=9,w.a.post("/user/appleProfUpdate",n);case 9:e.next=12;break;case 11:console.log("No Authorization code - post request not submitted");case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])}))),n.handleSpotifyAuth=function(){w.a.get("/user/spotifyLogin").then((function(e){console.log(e.request.responseURL);var t=e.request.responseURL.substring(36);window.location=t})).catch((function(e){console.log("Spotify authentication error"),console.log(e)}))},n.state={},n.handleSpotifyAuth=n.handleSpotifyAuth.bind(Object(E.a)(n)),n.handleAppleAuth=n.handleAppleAuth.bind(Object(E.a)(n)),n}return Object(u.a)(a,[{key:"render",value:function(){return c.a.createElement("div",{className:"authContainer",id:"landing-container"},c.a.createElement("div",null,c.a.createElement("h2",null,"Final Step: Link Music Accounts"),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("h3",null,"Click below to link your Spotify or Apple Music accounts."),c.a.createElement(d.a,{onClick:this.handleSpotifyAuth,className:"authBtn"},"Link to Spotify"),c.a.createElement(d.a,{onClick:this.handleAppleAuth,className:"authBtn",label:"Link Apple Music"},"Link to Apple Music")))}}]),a}(n.Component),j=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"componentDidMount",value:function(){w.a.get("/user/spotifyCallback"+this.props.location.search).then((function(e){console.log(e),window.location=e.request.responseURL})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return c.a.createElement("div",null)}}]),a}(n.Component),_={url:{API_URL:"https://slacktoplaylist.herokuapp.com",API_URL_USERS:"https://myapp.herokuapp.com/users"}},N=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement("h2",{className:"slackContainer"},"First Step: Link your Slack account where SlackToPlaylist has been activated"),"http://localhost:3000"===_.url.API_URL?c.a.createElement("div",{className:"slackBtn"},c.a.createElement("a",{href:"https://slack.com/oauth/v2/authorize?user_scope=identity.basic,identity.email,identity.team&client_id=1316992117988.1323435218849&redirect_uri=http%3A%2F%2Flocalhost%3A3000%2FslackRedir"},c.a.createElement("img",{alt:" Sign in with Slack",height:"40",width:"172",src:"https://platform.slack-edge.com/img/sign_in_with_slack.png",srcset:"https://platform.slack-edge.com/img/sign_in_with_slack.png 1x, https://platform.slack-edge.com/img/sign_in_with_slack@2x.png 2x"}))):c.a.createElement("div",{className:"slackBtn"},c.a.createElement("a",{href:"https://slack.com/oauth/v2/authorize?user_scope=identity.basic,identity.email,identity.team&client_id=1316992117988.1323435218849&redirect_uri=https%3A%2F%2Fslacktoplaylist.herokuapp.com%2FslackRedir"},c.a.createElement("img",{alt:" Sign in with Slack",height:"40",width:"172",src:"https://platform.slack-edge.com/img/sign_in_with_slack.png",srcset:"https://platform.slack-edge.com/img/sign_in_with_slack.png 1x, https://platform.slack-edge.com/img/sign_in_with_slack@2x.png 2x"}))))}}]),a}(n.Component),O=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){if(n.state.authProcessIncomplete){var e={code:window.location.search.split("=")[1].split("&")[0]};w.a.post("/user/slackAuth",e).then((function(e){console.log(e),window.location=e.data.redir}))}else console.log("second redirect")},n.state={authProcessIncomplete:!0},n}return Object(u.a)(a,[{key:"render",value:function(){return c.a.createElement("div",null)}}]),a}(n.Component),x=a(28),S=a(29),A=a.n(S),C=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).resetUserInputs=function(){n.setState({username:"",password:""})},n.handleInputChange=function(e){var t=e.target,a=t.name,c=t.value;n.setState(Object(x.a)({},a,c))},n.handleFormSubmit=function(e){e.preventDefault();var t={username:n.state.username,password:n.state.password};w.a.post("user/signup",t).then((function(e){e.data.redirect?(console.log("successful signup"),window.location="/"):console.log("Sign-up error")})).catch((function(e){console.log("Sign up server error: "),console.log(e)}))},n.state={username:"",password:""},n.resetUserInputs=n.resetUserInputs.bind(Object(E.a)(n)),n.handleInputChange=n.handleInputChange.bind(Object(E.a)(n)),n.handleFormSubmit=n.handleFormSubmit.bind(Object(E.a)(n)),n}return Object(u.a)(a,[{key:"render",value:function(){return c.a.createElement("div",{className:"container h-100"},c.a.createElement("div",{className:"d-flex justify-content-center h-100"},c.a.createElement("div",{className:"user_card_signup"},c.a.createElement("div",{className:"d-flex justify-content-center"},c.a.createElement("div",{className:"brand_logo_container_signup"},c.a.createElement("img",{src:A.a,className:"brand_logo_signup",alt:"logo"}))),c.a.createElement("div",{className:"d-flex justify-content-center form_container_signup"},c.a.createElement("form",{className:"signup"},c.a.createElement("div",{className:"form-group"},c.a.createElement("label",null,"Username"),c.a.createElement("input",{value:this.state.username,name:"username",onChange:this.handleInputChange,type:"text",className:"form-control",placeholder:"Username"})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",null,"Password"),c.a.createElement("input",{value:this.state.password,name:"password",onChange:this.handleInputChange,type:"password",className:"form-control input_pass",placeholder:"Password"})),c.a.createElement("button",{onClick:this.handleFormSubmit,className:"btn btn-primary signup_btn"},"Sign Up"))),c.a.createElement("div",{className:"mt-4"},c.a.createElement("div",{className:"d-flex justify-content-center links"},c.a.createElement("a",{href:"/login",className:"ml-2"},"Have an account?"))))))}}]),a}(n.Component),I=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).resetUserInputs=function(){n.setState({username:"",password:""})},n.handleInputChange=function(e){var t=e.target,a=t.name,c=t.value;n.setState(Object(x.a)({},a,c))},n.handleFormSubmit=function(e){e.preventDefault();var t={username:n.state.username,password:n.state.password};w.a.post("/user/login",t).then((function(e){console.log("login response: "),console.log(e),200===e.status&&(console.log("200"),"/slackAuth"===e.data.redirect?window.location="/slackAuth":"/login"===e.data.redirect&&(window.location="/login"))})).catch((function(e){console.log("login error "),console.log(e),window.location="/login"}))},n.state={username:"",password:""},n.resetUserInputs=n.resetUserInputs.bind(Object(E.a)(n)),n.handleInputChange=n.handleInputChange.bind(Object(E.a)(n)),n.handleFormSubmit=n.handleFormSubmit.bind(Object(E.a)(n)),n}return Object(u.a)(a,[{key:"render",value:function(){return c.a.createElement("div",{className:"container h-100"},c.a.createElement("div",{className:"d-flex justify-content-center h-100"},c.a.createElement("div",{className:"user_card_login"},c.a.createElement("div",{className:"d-flex justify-content-center"},c.a.createElement("div",{className:"brand_logo_container_login"},c.a.createElement("img",{src:A.a,className:"brand_logo_login",alt:"logo"}))),c.a.createElement("div",{className:"d-flex justify-content-center form_container_login"},c.a.createElement("form",{className:"login"},c.a.createElement("div",{className:"input-group mb-3"},c.a.createElement("div",{className:"input-group-append"},c.a.createElement("span",{className:"input-group-text"},c.a.createElement("i",{className:"fas fa-user"}))),c.a.createElement("input",{value:this.state.username,name:"username",onChange:this.handleInputChange,type:"text",className:"form-control input_user_login",placeholder:"username"})),c.a.createElement("div",{className:"input-group mb-2"},c.a.createElement("div",{className:"input-group-append"},c.a.createElement("span",{className:"input-group-text"},c.a.createElement("i",{className:"fas fa-key"}))),c.a.createElement("input",{value:this.state.password,name:"password",onChange:this.handleInputChange,type:"password",className:"form-control input_pass_login",placeholder:"password"})),c.a.createElement("div",{className:"d-flex justify-content-center mt-3 login_container"},c.a.createElement("button",{onClick:this.handleFormSubmit,className:"btn login_btn"},"Login")))),c.a.createElement("div",{className:"mt-4"},c.a.createElement("div",{className:"d-flex justify-content-center links"},"Don't have an account? ",c.a.createElement("a",{href:"/register",className:"ml-2"},"Sign Up"))))))}}]),a}(n.Component),U=a(57),F={getAuth:function(){return Object(v.a)(b.a.mark((function e(){var t,a,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(){return(a=Object(v.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.a.get("/user");case 3:if("no user logged in"!==e.sent.data){e.next=8;break}return e.abrupt("return",!1);case 8:return e.abrupt("return",!0);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)},t=function(){return a.apply(this,arguments)},e.next=4,t();case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})))()}},L=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={loading:!0,isAuthenticated:!1},n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this;F.getAuth().then((function(t){console.log(t),e.setState({loading:!1,isAuthenticated:t})}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.component,n=Object(U.a)(t,["component"]);return c.a.createElement(s.b,Object.assign({},n,{render:function(t){return e.state.isAuthenticated?c.a.createElement(a,t):e.state.loading?c.a.createElement("div",null,"LOADING"):c.a.createElement(s.a,{to:"/"})}}))}}]),a}(n.Component);var P=function(e){return c.a.createElement(s.d,null,c.a.createElement(s.b,{exact:!0,path:"/",component:g}),c.a.createElement(s.b,{exact:!0,path:"/register",component:C}),c.a.createElement(s.b,{exact:!0,path:"/login",component:I}),c.a.createElement(L,{exact:!0,path:"/slackAuth",component:N}),c.a.createElement(L,{exact:!0,path:"/slackRedir",component:O}),c.a.createElement(L,{exact:!0,path:"/home",component:y}),c.a.createElement(L,{exact:!0,path:"/spotifyCallback",component:j}),c.a.createElement(L,{exact:!0,path:"/user/slack",component:y}))};var R=function(){return c.a.createElement("div",{className:"AppParentDiv"},c.a.createElement(l.Layout,null,c.a.createElement(l.Header,{className:"header-color",title:c.a.createElement(h.b,{style:{textDecoration:"none",color:"white"},to:"/"},"SlackToPlaylist"),scroll:!0},c.a.createElement(l.Navigation,null,c.a.createElement(h.b,{to:"/register"},"Register Today"),c.a.createElement(h.b,{to:"/login"},"Log In"))),c.a.createElement(l.Content,null,c.a.createElement("div",{className:"page-content"}),c.a.createElement(P,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(134),a(135);o.a.render(c.a.createElement(h.a,null,c.a.createElement(R,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},29:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},59:function(e,t,a){e.exports=a(136)},64:function(e,t,a){},65:function(e,t,a){}},[[59,1,2]]]);
//# sourceMappingURL=main.7be99c78.chunk.js.map